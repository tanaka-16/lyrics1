<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lyrics Sync</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #f9f9f9;
        }
        iframe {
            margin-top: 20px;
            width: 560px;
            height: 315px;
        }
        .lyrics {
            margin-top: 20px;
            width: 560px;
            background: #fff;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            line-height: 1.5;
        }
        .highlight {
            color: #d9534f;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>同期歌詞</h1>
    <!-- YouTube Video -->
    <iframe id="video" src="https://www.youtube.com/embed/_zqKrYCj44Y?enablejsapi=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    <!-- Lyrics Container -->
    <div class="lyrics" id="lyrics">
        <!-- Lyrics will display here -->
    </div>

    <script>
        // YouTube API Player
        let player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('video', {
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // Lyrics data (manually added)
        const lyricsData = [
            { start: 0, end: 5, text: "誰よりも\n「救いたい」と悲劇を気取ってた" },
            { start: 6, end: 10, text: "面倒よりも\nそれが砕いても、煮込んでも" },
            { start: 11, end: 15, text: "食べれない故に" },
            { start: 16, end: 20, text: "大脳の意思では\n静観がキメの一手なんだって" },
            { start: 21, end: 25, text: "だが、心臓が言うに\n芽吹けば栄養さ" },
            { start: 26, end: 30, text: "この先も誰かを想うたび\n風纏い擦り傷が絶えないだろう" },
            { start: 31, end: 35, text: "だがやがてこの風、受けるたびに\nその、変え難い" },
            { start: 36, end: 40, text: "ぬくい痛みに\n報われていたい\nはず" },
            { start: 41, end: 45, text: "ジリジリ\n頬つたって痛いよ\n芽吹いた" },
            { start: 46, end: 50, text: "ヒラヒラ\n喉元つたって\n吸い込み" },
            { start: 51, end: 55, text: "肺が痛いよ\nでもね\nトクトク\nあたたかいね" }
        ];

        // Display Lyrics
        function updateLyrics(currentTime) {
            const lyricsContainer = document.getElementById('lyrics');
            lyricsContainer.innerHTML = ''; // Clear existing lyrics
            lyricsData.forEach(({ start, end, text }) => {
                if (currentTime >= start && currentTime <= end) {
                    const line = document.createElement('div');
                    line.classList.add('highlight');
                    line.textContent = text;
                    lyricsContainer.appendChild(line);
                }
            });
        }

        // Player Ready
        function onPlayerReady(event) {
            setInterval(() => {
                const currentTime = player.getCurrentTime();
                updateLyrics(currentTime);
            }, 500);
        }

        function onPlayerStateChange(event) {}

        // Load YouTube API Script
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    </script>
</body>
</html>
